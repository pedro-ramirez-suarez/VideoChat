/*
 * jQuery Voice plugin 0.1
 * Copyright Subin Siby - http://subinsb.com
 * MIT licensed
 * -------------
 * A jQuery plugin to record, play & download microphone input sound from the user.
 * NEEDS recorder.js and recorderWorker.js to work - https://github.com/mattdiamond/Recorderjs
 *  
*/
(function (e) { e.extend({ voice: { workerPath: 'scripts/recorderWorker.js', initCalled: !1, stream: !1, init: function () { try { window.AudioContext = window.AudioContext || window.webkitAudioContext; navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia; window.URL = window.URL || window.webkitURL; if (navigator.getUserMedia === !1) { alert('getUserMedia() is not supported in your browser') }; e.voice.context = new AudioContext() } catch (o) { alert('Web Audio API is not supported in this browser') } }, record: function (o, i) { if (e.voice.initCalled === !1) { this.init(); e.voice.initCalled = !0 }; navigator.getUserMedia({ audio: !0 }, function (t) { var r = e.voice.context.createMediaStreamSource(t); if (o === !0) { r.connect(e.voice.context.destination) }; e.voice.recorder = new Recorder(r, { workerPath: e.voice.workerPath }); e.voice.stream = t; e.voice.recorder.record(); i(t) }, function () { alert('No live audio input') }) }, stop: function () { e.voice.recorder.stop(); e.voice.recorder.clear(); e.voice.stream.stop(); return e.voice }, export: function (o, i) { e.voice.recorder.exportWAV(function (e) { if (i == '' || i == 'blob') { o(e) } else if (i == 'URL') { var t = URL.createObjectURL(e); o(t) } }) } } }) })(jQuery);